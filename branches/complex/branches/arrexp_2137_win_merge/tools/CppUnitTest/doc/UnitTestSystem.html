<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.7 [en] (X11; I; SunOS 5.8 sun4u) [Netscape]">
   <meta name="CREATED" content="20010209;11071700">
   <meta name="CHANGEDBY" content="Rice Ed">
   <meta name="CHANGED" content="20010209;11352500">
   <meta name="Template" content="C:\Program Files\MSOffice\Office\html.dot">
   <title>CppUnit Cookbook</title>
<style>
	<!--
		A:link { color: #0000ff }
		A:visited { color: #800080 }
	-->
	</style>
</head>
<body link="#0000FF" vlink="#800080">

<h1>
<b><font color="#3366FF"><font size=+2>UnitTest System</font></font></b></h1>
<font color="#330000">The UnitTest system consists of two major components.
A library which is derived from the CppUnitTest library developed by Michael
Feathers. This library has been modified to better suit the requirements
of PGS and the PGS development environment. Please read the</font> <a href="license.html">license</a>&nbsp;
agreement. The library provides a framework written in C++ for creating
unit tests. The units being tested can be either C or C++.
<p>The second component of the UnitTest system is a collection of scripts
which allow libraries and unit tests to be rebuilt and executed each night
automatically. The scripts are designed so that the building and testing
may take place on more than one platform at once. The results of all of
the rebuilds and the execution of each unit test is presented in an html
document which provides a quick and easy summary of the state of each component
built and tested.
<p><b><font color="#3366FF"><font size=+2>Creation of A Unit Test</font></font></b>
<p>A script which is part of the Alien package makes it simple to create
a unit test skeleton for a particular class or module. The script also
creates a makefile for the unit test. An example session is shown below.
A unit test will be created for the class Range.
<p>Running the script without an argument generates a usage message.
<blockquote><tt>$ALIEN_HOME/scripts/UTSkel.pl</tt>
<br><tt>Program Usage: UTSkel.pl &lt;ClassName></tt>
<p><tt>&nbsp; where ClassName - Name of class for which to create UnitTest
files.</tt></blockquote>
Running the script again with the name of the class for which the unit
test skeleton will be built generates the following.
<blockquote>$<tt>ALIEN_HOME/scripts/UTSkel.pl Range</tt>
<br><tt>UTSkel.pl: Wrote file (RangeTest.C).</tt>
<br><tt>UTSkel.pl: Wrote file (RangeTest.mk).</tt>
<br><tt>UTSkel.pl: Wrote file (RangeTestCase.C).</tt>
<br><tt>UTSkel.pl: Wrote file (RangeTestCase.h).</tt>
<br><tt>UTSkel.pl: Finished.</tt></blockquote>
The script creates four output files.
<br>RangeTest.C contains main for the unit test and often doesn't need
to be edited. In fact the code generated for the skeleton should build
and execute as is although it doesn't do anything useful. The executable
produced is called RangeTest.
<p>Contents of <font color="#3333FF">RangeTest.C</font> skeleton.
<blockquote><tt>/*</tt>
<br><tt>COPYRIGHT Petroleum Geo-Sciences 2000 - All Rights Reserved This</tt>
<br><tt>software is the property of Petroleum Geo-Sciences (PGS). No par</tt>
<br><tt>t of</tt>
<br><tt>this code may be copied in any form or by any means without the</tt>
<br><tt>expressed written consent of PGS.&nbsp; Copying, use or modification</tt>
<br><tt>of</tt>
<br><tt>this software by any person other than a Petroleum Geo-Sciences</tt>
<br><tt>employee is illegal unless that person has a software license</tt>
<br><tt>agreement with PGS to do so.&nbsp; NOTICE: This is confidential
infor</tt>
<br><tt>mation</tt>
<br><tt>not to be discussed or used outside of PGS.</tt>
<br><tt>*/</tt>
<br><tt>#include "RangeTestCase.h"</tt>
<br><tt>#include "Alien/TestRunner.h"</tt>
<br>&nbsp;
<p><tt>main(int argc, char *argv[]) {</tt>
<br><tt>&nbsp; //</tt>
<br><tt>&nbsp; // object which runs all of the tests</tt>
<br><tt>&nbsp; TestRunner runner;</tt>
<br><tt>&nbsp; //</tt>
<br><tt>&nbsp; // add the RangeTestCase suite of tests to the runner</tt>
<br><tt>&nbsp; runner.addTest ("RangeTestCase",</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
RangeTestCase::suite ());</tt>
<br><tt>&nbsp; //</tt>
<br><tt>&nbsp; // actually run the unit tests.</tt>
<br><tt>&nbsp; runner.run (argc, argv);</tt>
<p><tt>&nbsp; return 0;</tt>
<br><tt>}</tt></blockquote>

<p><br>RangeTest.mk may need to be edited depending on the libraries and
objects needed for the test. Refer to the documentation for the Alien make
system.
<p>Contents of <font color="#3333FF">RangeTest.mk</font> skeleton.
<blockquote><tt># Specify a list of the objects that</tt>
<br><tt># will be built.</tt>
<br><tt>OBJS = RangeTestCase.o RangeTest.o</tt>
<p><tt># BUILDNAME is the name of the executable to build.</tt>
<br><tt># if it is defined the value provided is the name of the executa</tt>
<br><tt>ble generated</tt>
<br><tt>BUILDTYPE=EXECUTABLE</tt>
<br><tt>USECMENV=NO</tt>
<br><tt>USEALIENENV=YES</tt>
<br><tt>BUILDNAME = RangeTest</tt>
<p><tt>USER_LINK =</tt>
<p><tt>DODEBUG = YES</tt>
<p><tt>include $(ALIEN_HOME)/Make/Makefile.perth</tt></blockquote>

<p><br>RangeTestCase.C contains the bulk of the code for performing the
unit test. This will always need to be edited.
<p>Contents of <font color="#3333FF">RangeTestCase.C </font>skeleton.
<blockquote><b>/</b><tt>*</tt>
<p><tt>COPYRIGHT Petroleum Geo-Sciences 2000 - All Rights Reserved This</tt>
<br><tt>software is the property of Petroleum Geo-Sciences (PGS). No part
of</tt>
<br><tt>this code may be copied in any form or by any means without the</tt>
<br><tt>expressed written consent of PGS.&nbsp; Copying, use or modification
of</tt>
<br><tt>this software by any person other than a Petroleum Geo-Sciences</tt>
<br><tt>employee is illegal unless that person has a software license</tt>
<br><tt>agreement with PGS to do so.&nbsp; NOTICE: This is confidential
information</tt>
<br><tt>not to be discussed or used outside of PGS.</tt>
<p><tt>*/</tt>
<br><tt>#include "Alien/Range.h"</tt>
<br><tt>#include "RangeTestCase.h"</tt>
<p><tt>void RangeTestCase::setUp() {</tt>
<br><tt>&nbsp; //</tt>
<br><tt>&nbsp; // This is called before each test is run</tt>
<p><tt>}</tt>
<p><tt>void RangeTestCase::tearDown() {</tt>
<br><tt>&nbsp; //</tt>
<br><tt>&nbsp; // This is called after each test has been run</tt>
<p><tt>}</tt>
<p><tt>void RangeTestCase::testAll() {</tt>
<br><tt>&nbsp; //</tt>
<br><tt>&nbsp; // The test code may be entered here</tt>
<br><tt>&nbsp; // There is nothing special about the function name, it
may be renamed to</tt>
<br><tt>&nbsp; // something more suitable.</tt>
<br><tt>&nbsp; // As many test methods as desired may be added.</tt>
<p><tt>}</tt>
<br>&nbsp;
<p><tt>Test* RangeTestCase::suite ()</tt>
<br><tt>{</tt>
<br><tt>&nbsp; //</tt>
<br><tt>&nbsp; // create the suite of tests to perform.</tt>
<br><tt>&nbsp; TestSuite *testSuite = new TestSuite ("RangeTestCase");</tt>
<br><tt>&nbsp; testSuite->addTest (new TestCaller &lt;RangeTestCase> ("testAll",&amp;RangeTestCase::testAll));</tt>
<br><tt>&nbsp; return testSuite;</tt>
<br><tt>}</tt></blockquote>

<p><br>RangeTestCase.h may need editing depending on whetherthe default
function name testAll is changed or additional functions are added.
<p>Contents of <font color="#3333FF">RangeTestCase.h</font> skeleton
<blockquote><tt>/*</tt>
<p><tt>COPYRIGHT Petroleum Geo-Sciences 2000 - All Rights Reserved This</tt>
<br><tt>software is the property of Petroleum Geo-Sciences (PGS). No part
of</tt>
<br><tt>this code may be copied in any form or by any means without the</tt>
<br><tt>expressed written consent of PGS.&nbsp; Copying, use or modification
of</tt>
<br><tt>this software by any person other than a Petroleum Geo-Sciences</tt>
<br><tt>employee is illegal unless that person has a software license</tt>
<br><tt>agreement with PGS to do so.&nbsp; NOTICE: This is confidential
information</tt>
<br><tt>not to be discussed or used outside of PGS.</tt>
<p><tt>*/</tt>
<br><tt>#if !defined&nbsp; RANGETESTCASE_H</tt>
<br><tt>#define RANGETESTCASE_H</tt>
<p><tt>#include "Alien/AlienNamespace.h"</tt>
<p><tt>#include "Alien/TestCase.h"</tt>
<br><tt>#include "Alien/TestSuite.h"</tt>
<br><tt>#include "Alien/TestCaller.h"</tt>
<p><tt>BEGIN_NAMESPACE_ALIEN</tt>
<p><tt>class RangeTestCase : public TestCase</tt>
<br><tt>{</tt>
<br><tt>&nbsp;public:</tt>
<br><tt>&nbsp; RangeTestCase (string name) : TestCase (name) {}</tt>
<br><tt>&nbsp; ~RangeTestCase() {}</tt>
<br><tt>&nbsp; //</tt>
<br><tt>&nbsp; // Virtual methods of TestCase. These are provided to ensure
the objects</tt>
<br><tt>&nbsp; // being used in the tests are in a known state.</tt>
<br><tt>&nbsp; // setUp is called before each test method is called</tt>
<br><tt>&nbsp; void setUp();</tt>
<br><tt>&nbsp; //</tt>
<br><tt>&nbsp; // tearDown is called after each test method is called.</tt>
<br><tt>&nbsp; void tearDown();</tt>
<br><tt>&nbsp; //</tt>
<br><tt>&nbsp; // return the suite of tests to perform</tt>
<br><tt>&nbsp; static Test* suite ();</tt>
<p><tt>&nbsp;protected:</tt>
<br><tt>&nbsp; //</tt>
<br><tt>&nbsp; // The following methods are for testing various methods
of the</tt>
<br><tt>&nbsp; // Range class</tt>
<br><tt>&nbsp; void testAll();</tt>
<p><tt>&nbsp;private:</tt>
<br>&nbsp;
<p><tt>};</tt>
<p><tt>END_NAMESPACE_ALIEN</tt>
<p><tt>#endif</tt></blockquote>
<font color="#330000">In order to complete the unit test the skeleton generated
was modfied to produce the final code.&nbsp; In our example the "testAll"
method has been removed from the skeleton code and four new methods created
to perform the required tests. Each method tests a different aspect of
the Range class.</font>
<p>&nbsp;<a href="Range.html">Range Class</a>
<p>The
<i>RangeTestCase</i> class inherits from the
<i>TestCase</i> class
which is part of the UnitTest library.&nbsp; All unit tests must inherit
from the <i>TestCase</i> class. It of course is often possible to test
all of the aspects of a class or module with just one method. The four
methods created are
<br>&nbsp;&nbsp;&nbsp; testEquality
<br>&nbsp;&nbsp;&nbsp; testWithin
<br>&nbsp;&nbsp;&nbsp; testRangeException
<br>&nbsp;&nbsp;&nbsp; testOverlap
<br>These methods are bundled together into an object called a "suite".
A "suite" is just a collection of tests to be performed together. The UnitTest
library provides the <i>TestSuite</i> class for grouping together a collection
of tests.&nbsp; All of the tests within this suite are run within a <i>TestRunner</i>
object also provided by the UnitTest library. More than one suite may be
run within a <i>TestRunner</i>.
<p><font color="#330000">Final code for </font><font color="#3366FF">RangeTestCase.h</font>
<blockquote><tt>/*</tt>
<p><tt>COPYRIGHT Petroleum Geo-Sciences 2000 - All Rights Reserved This</tt>
<br><tt>software is the property of Petroleum Geo-Sciences (PGS). No part
of</tt>
<br><tt>this code may be copied in any form or by any means without the</tt>
<br><tt>expressed written consent of PGS.&nbsp; Copying, use or modification
of</tt>
<br><tt>this software by any person other than a Petroleum Geo-Sciences</tt>
<br><tt>employee is illegal unless that person has a software license</tt>
<br><tt>agreement with PGS to do so.&nbsp; NOTICE: This is confidential
information</tt>
<br><tt>not to be discussed or used outside of PGS.</tt>
<p><tt>*/</tt>
<br><tt>#if !defined&nbsp; RANGETESTCASE_H</tt>
<br><tt>#define RANGETESTCASE_H</tt>
<p><tt>#include "Alien/AlienNamespace.h"</tt>
<p><tt>#include "Alien/TestCase.h"</tt>
<br><tt>#include "Alien/TestSuite.h"</tt>
<br><tt>#include "Alien/TestCaller.h"</tt>
<p><tt>BEGIN_NAMESPACE_ALIEN</tt>
<p><tt>class RangeTestCase : public TestCase</tt>
<br><tt>{</tt>
<br><tt>&nbsp;private:</tt>
<br><tt>&nbsp; //</tt>
<br><tt>&nbsp; // Two integer ranges created by setUp method. They are
destructed in the</tt>
<br><tt>&nbsp; // tearDown method. All of the tests use these ranges.</tt>
<br><tt>&nbsp; Range&lt;int> *r1,*r2;</tt>
<br><tt>&nbsp;protected:</tt>
<br><tt>&nbsp; //</tt>
<br><tt>&nbsp; // The following methods are for testing various methods
of the Range class</tt>
<br><tt>&nbsp; //</tt>
<br><tt>&nbsp; // Method to test whether operator==() method is working</tt>
<br><tt>&nbsp; void testEquality();</tt>
<br><tt>&nbsp; //</tt>
<br><tt>&nbsp; // Method to test whether within() method is working</tt>
<br><tt>&nbsp; void testWithin();</tt>
<br><tt>&nbsp; //</tt>
<br><tt>&nbsp; // Method to test whether a RangeException is contructed
and thrown correctly</tt>
<br><tt>&nbsp; void testRangeException();</tt>
<br><tt>&nbsp; //</tt>
<br><tt>&nbsp; // Method to test whether the overlap method works</tt>
<br><tt>&nbsp; void testOverlap();</tt>
<p><tt>&nbsp;public:</tt>
<br><tt>&nbsp; RangeTestCase (string name) : TestCase (name) {}</tt>
<br><tt>&nbsp; ~RangeTestCase() {}</tt>
<br><tt>&nbsp; //</tt>
<br><tt>&nbsp; // Virtual methods of TestCase. These are provided to ensure
the objects</tt>
<br><tt>&nbsp; // being used in the tests are in a known state.</tt>
<br><tt>&nbsp; // setUp is called before each test method is called</tt>
<br><tt>&nbsp; void setUp();</tt>
<br><tt>&nbsp; //</tt>
<br><tt>&nbsp; // tearDown is called after each test method is called.</tt>
<br><tt>&nbsp; void tearDown();</tt>
<br><tt>&nbsp; //</tt>
<br><tt>&nbsp; // return the suite of tests to perform</tt>
<br><tt>&nbsp; static Test* suite ();</tt>
<br><tt>};</tt>
<p><tt>END_NAMESPACE_ALIEN</tt>
<p><tt>#endif</tt></blockquote>
<font color="#330000">Final code for</font><font color="#3366FF"> RangeTestCase.C</font>
<blockquote><tt>/*</tt>
<p><tt>COPYRIGHT Petroleum Geo-Sciences 2000 - All Rights Reserved This</tt>
<br><tt>software is the property of Petroleum Geo-Sciences (PGS). No part
of</tt>
<br><tt>this code may be copied in any form or by any means without the</tt>
<br><tt>expressed written consent of PGS.&nbsp; Copying, use or modification
of</tt>
<br><tt>this software by any person other than a Petroleum Geo-Sciences</tt>
<br><tt>employee is illegal unless that person has a software license</tt>
<br><tt>agreement with PGS to do so.&nbsp; NOTICE: This is confidential
information</tt>
<br><tt>not to be discussed or used outside of PGS.</tt>
<p><tt>*/</tt>
<br><tt>#include "Alien/Range.h"</tt>
<br><tt>#include "RangeTestCase.h"</tt>
<p><tt>void RangeTestCase::setUp() {</tt>
<br><tt>&nbsp; //</tt>
<br><tt>&nbsp; // create fresh objects for this test</tt>
<br><tt>&nbsp; r1=new Range&lt;int>(1,5);</tt>
<br><tt>&nbsp; r2=new Range&lt;int>(1,7);</tt>
<br><tt>}</tt>
<p><tt>void RangeTestCase::tearDown() {</tt>
<br><tt>&nbsp; //</tt>
<br><tt>&nbsp; // destroy the objects from the last test</tt>
<br><tt>&nbsp; delete r1;</tt>
<br><tt>&nbsp; delete r2;</tt>
<br><tt>}</tt>
<p><tt>void RangeTestCase::testEquality() {</tt>
<br><tt>&nbsp; //</tt>
<br><tt>&nbsp; // check whether the operator==() method returns r1 as equal
to itself.</tt>
<br><tt>&nbsp; // This should return true if the method is working correctly</tt>
<br><tt>&nbsp; // If false is returned the test will stop and a failure
is reported</tt>
<br><tt>&nbsp; assert((*r1)==(*r1));</tt>
<br><tt>&nbsp; //</tt>
<br><tt>&nbsp; // This should return true as r1 does not equal r2.</tt>
<br><tt>&nbsp; assert(!(*r1)==(*r2));</tt>
<br><tt>}</tt>
<p><tt>void RangeTestCase::testWithin() {</tt>
<br><tt>&nbsp; //</tt>
<br><tt>&nbsp; // test whether the minimum and maximum&nbsp; value for
the range are within</tt>
<br><tt>&nbsp; // the range. Both should return true.</tt>
<br><tt>&nbsp; assert((*r1).within((*r1).getMin()));</tt>
<br><tt>&nbsp; assert((*r1).within((*r1).getMax()));</tt>
<br><tt>}</tt>
<p><tt>void RangeTestCase::testRangeException() {</tt>
<br><tt>&nbsp; try {</tt>
<br><tt>&nbsp;&nbsp;&nbsp; //</tt>
<br><tt>&nbsp;&nbsp;&nbsp; // This call should throw an exception as the
range is invalid</tt>
<br><tt>&nbsp;&nbsp;&nbsp; (*r1).setRange(3,1);</tt>
<br><tt>&nbsp;&nbsp;&nbsp; //</tt>
<br><tt>&nbsp;&nbsp;&nbsp; // if the test gets here the exception has failed</tt>
<br><tt>&nbsp;&nbsp;&nbsp; assert(false);</tt>
<br><tt>&nbsp; }</tt>
<br><tt>&nbsp; catch (RangeException &amp;e) {</tt>
<br><tt>&nbsp; }</tt>
<br><tt>}</tt>
<br><tt>void RangeTestCase::testOverlap() {</tt>
<br><tt>&nbsp; //</tt>
<br><tt>&nbsp; // Test whether r1 overlaps r2. Should return true.</tt>
<br><tt>&nbsp; assert((*r1).overlap((*r2)));</tt>
<br><tt>}</tt>
<br>&nbsp;
<p><tt>Test* RangeTestCase::suite ()</tt>
<br><tt>{</tt>
<br><tt>&nbsp; //</tt>
<br><tt>&nbsp; // create the suite of tests to perform.</tt>
<br><tt>&nbsp; TestSuite *testSuite = new TestSuite ("RangeTestCase");</tt>
<p><tt>&nbsp; testSuite->addTest (new TestCaller &lt;RangeTestCase> ("testEquality",&amp;RangeTestCase::testEquality));</tt>
<br><tt>&nbsp; testSuite->addTest (new TestCaller &lt;RangeTestCase> ("testWithin",&amp;RangeTestCase::testWithin));</tt>
<br><tt>&nbsp; testSuite->addTest (new TestCaller &lt;RangeTestCase> ("testRangeException",&amp;RangeTestCase::testRangeException));</tt>
<br><tt>&nbsp; testSuite->addTest (new TestCaller &lt;RangeTestCase> ("testOverlap",&amp;RangeTestCase::testOverlap));</tt>
<br><tt>&nbsp; return testSuite;</tt>
<br><tt>}</tt>
<br>&nbsp;</blockquote>
Final code for <font color="#3333FF">RangeTest.C</font>
<blockquote><tt>/*</tt>
<br><tt>COPYRIGHT Petroleum Geo-Sciences 2000 - All Rights Reserved This</tt>
<br><tt>software is the property of Petroleum Geo-Sciences (PGS). No par</tt>
<br><tt>t of</tt>
<br><tt>this code may be copied in any form or by any means without the</tt>
<br><tt>expressed written consent of PGS.&nbsp; Copying, use or modification</tt>
<br><tt>of</tt>
<br><tt>this software by any person other than a Petroleum Geo-Sciences</tt>
<br><tt>employee is illegal unless that person has a software license</tt>
<br><tt>agreement with PGS to do so.&nbsp; NOTICE: This is confidential
infor</tt>
<br><tt>mation</tt>
<br><tt>not to be discussed or used outside of PGS.</tt>
<br><tt>*/</tt>
<br><tt>#include "RangeTestCase.h"</tt>
<br><tt>#include "Alien/TestRunner.h"</tt>
<br>&nbsp;
<p><tt>main(int argc, char *argv[]) {</tt>
<br><tt>&nbsp; //</tt>
<br><tt>&nbsp; // object which runs all of the tests</tt>
<br><tt>&nbsp; TestRunner runner;</tt>
<br><tt>&nbsp; //</tt>
<br><tt>&nbsp; // add the RangeTestCase suite of tests to the runner</tt>
<br><tt>&nbsp; runner.addTest ("RangeTestCase",</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
RangeTestCase::suite ());</tt>
<br><tt>&nbsp; //</tt>
<br><tt>&nbsp; // give the same suite another name to demonstrate</tt>
<br><tt>&nbsp; //&nbsp; multiple suites</tt>
<br><tt>&nbsp; runner.addTest ("R2Test",</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
RangeTestCase::suite ());</tt>
<br><tt>&nbsp; //</tt>
<br><tt>&nbsp; // actually run the unit tests.</tt>
<br><tt>&nbsp; runner.run (argc, argv);</tt>
<p><tt>&nbsp; return 0;</tt>
<br><tt>}</tt>
<br>&nbsp;</blockquote>
<font color="#3366FF"><font size=+2>Example Output</font></font>
<p>Executing RangeTest produces the following
<p><font color="#3366FF">Output with no errors or failures</font>
<p><tt>Suite: RangeTestCase</tt>
<br><tt>&nbsp; Test: testEquality Ok</tt>
<br><tt>&nbsp; Test: testWithin Ok</tt>
<br><tt>&nbsp; Test: testRangeException Ok</tt>
<br><tt>&nbsp; Test: testOverlap Ok</tt>
<p><tt>OK (4 tests)</tt>
<p><tt>Suite: R2Test</tt>
<br><tt>&nbsp; Test: testEquality Ok</tt>
<br><tt>&nbsp; Test: testWithin Ok</tt>
<br><tt>&nbsp; Test: testRangeException Ok</tt>
<br><tt>&nbsp; Test: testOverlap Ok</tt>
<p><tt>OK (4 tests)</tt>
<p><font color="#3366FF">Output with some of the tests deliberately made
to fail.</font>
<br><font color="#3366FF">Note: There is one failure and one error generated.</font>
<p><tt>Suite: RangeTestCase</tt>
<br><tt>&nbsp; Test: testEquality Failure</tt>
<br><tt>&nbsp; Test: testWithin Error</tt>
<br><tt>&nbsp; Test: testRangeException&nbsp; Ok</tt>
<br><tt>&nbsp; Test: testOverlap Ok</tt>
<p><tt>!!!FAILURES!!!</tt>
<br><tt>Test Results:</tt>
<br><tt>Run:&nbsp; 4&nbsp;&nbsp; Failures: 1&nbsp;&nbsp; Errors: 1</tt>
<br><tt>There was 1 error:</tt>
<br><tt>1) testWithin line: -1 &lt;unknown> "RangeException: Deliberate
exception from testWithin"</tt>
<br><tt>There was 1 failure:</tt>
<br><tt>1) testEquality line: 22 RangeTest.C "!((*r1)==(*r1))"</tt>
<p><tt>Suite: R2Test</tt>
<br><tt>&nbsp; Test: testEquality Failure</tt>
<br><tt>&nbsp; Test: testWithin Error</tt>
<br><tt>&nbsp; Test: testRangeException&nbsp; Ok</tt>
<br><tt>&nbsp; Test: testOverlap Ok</tt>
<p><tt>!!!FAILURES!!!</tt>
<br><tt>Test Results:</tt>
<br><tt>Run:&nbsp; 4&nbsp;&nbsp; Failures: 1&nbsp;&nbsp; Errors: 1</tt>
<br><tt>There was 1 error:</tt>
<br><tt>1) testWithin line: -1 &lt;unknown> "RangeException: Deliberate
exception from testWithin"</tt>
<br><tt>There was 1 failure:</tt>
<br><tt>1) testEquality line: 22 RangeTest.C "!((*r1)==(*r1))"</tt>
<p><font color="#3366FF"><font size=+2>Run-time options</font></font>
<p><font color="#330000"><font size=+0>You can specify the test suites
that you wish to run in a test by using arguments on the command line -</font></font>
<p><tt><font color="#330000"><font size=+0>TestExeName [suite=suite1[,suite2...]]
[suite=suitea[,suiteb...]]</font></font></tt>
<p><font color="#330000"><font size=+0>where suite1, suite2, suitea and
suiteb are the names of suites you want to run - suites can be repeated.</font></font>
<br>&nbsp;
<p><font color="#330000"><font size=+0>For example, in the range test above
which has two suites (RangeTestCase and R2Test). The test executable is
called RangeTest. You could use</font></font>
<p><tt><font color="#330000"><font size=+0>RangeTest</font></font></tt>
<p><font color="#330000"><font size=+0>to run both suites, or</font></font>
<p><tt><font color="#330000"><font size=+0>RangeTest suite=R2Test</font></font></tt>
<p><font color="#330000"><font size=+0>to just run the R2Test suite, or</font></font>
<p><tt><font color="#330000"><font size=+0>RangeTest suite=R2Test,R2Test,RangeTestCase
suite=RangeTestCase suite=R2Test,R2Test</font></font></tt>
<p><font color="#330000"><font size=+0>to run R2Test, followed by R2Test
, followed by RangeTestCase, followed by RangeTestCase, followed by two
more R2Test runs.</font></font>
<p><font color="#3366FF"><font size=+2>Run-time Arguments</font></font>
<p><font color="#330000"><font size=+0>Run-time arguments can be passed
through to the individual tests. In a test case, you can call the getArgs
function to obtain a const vector&lt;string>&amp; to a vector that contains
the command line arguments - note that all the suite=... arguments will
have been stripped out. If the system being run provides the name of the
executable as the first argument to the main function, then this will be
available to you as the first string in the argument vector (in whatever
format the system provides it).</font></font>
<p><font color="#330000"><font size=+0>For example in the testRangeException
function, the run time arguments could be obtained by changing the code
to the following -</font></font>
<p><tt><font color="#330000"><font size=+0>void RangeTestCase::testRangeException()
{</font></font></tt>
<br><b><tt><font color="#330000"><font size=+0>const vector&lt;string>&amp;
args = getArgs();</font></font></tt></b>
<br><tt><font color="#330000"><font size=+0>if(args.size()>0) {</font></font></tt>
<br><tt><font color="#330000"><font size=+0>cout &lt;&lt; "exe name is
" &lt;&lt; args[0] &lt;&lt; endl;</font></font></tt>
<br><tt><font color="#330000"><font size=+0>}</font></font></tt>
<br><tt><font color="#330000"><font size=+0>&nbsp; try {</font></font></tt>
<br><tt><font color="#330000"><font size=+0>&nbsp;&nbsp;&nbsp; //</font></font></tt>
<br><tt><font color="#330000"><font size=+0>&nbsp;&nbsp;&nbsp; // This
call should throw an exception as the range is invalid</font></font></tt>
<br><tt><font color="#330000"><font size=+0>&nbsp;&nbsp;&nbsp; (*r1).setRange(3,1);</font></font></tt>
<br><tt><font color="#330000"><font size=+0>&nbsp;&nbsp;&nbsp; //</font></font></tt>
<br><tt><font color="#330000"><font size=+0>&nbsp;&nbsp;&nbsp; // if the
test gets here the exception has failed</font></font></tt>
<br><tt><font color="#330000"><font size=+0>&nbsp;&nbsp;&nbsp; assert(false);</font></font></tt>
<br><tt><font color="#330000"><font size=+0>&nbsp; }</font></font></tt>
<br><tt><font color="#330000"><font size=+0>&nbsp; catch (RangeException
&amp;e) {</font></font></tt>
<br><tt><font color="#330000"><font size=+0>&nbsp; }</font></font></tt>
<br><tt><font color="#330000"><font size=+0>}</font></font></tt>
<br>&nbsp;
<p><font color="#3366FF"><font size=+2>UnitTest Scripts</font></font>
<p>Several scripts exist to help&nbsp; manage the building and execution
of unit tests each night. All of these scripts and associated configuration
files may be found in $ALIEN_HOME/scripts.
<p><font color="#3333FF">fandExe.pl </font><font color="#000000">Is a find
and execute command similar to the unix "find" command although slightly
more configurable in it's ability to execute commands for any files found.</font>
<p><tt>Usage fandExe.pl -file -command -rootDir [-depth -stdout -stderr
-trial -cprefix -fail]</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -file&nbsp;&nbsp;&nbsp; - The file
pattern.</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -rootDir - Directory to begin search
from.</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -command - The command to run including
arguments.</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -depth&nbsp;&nbsp; - The maximum
search depth. Default 0</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -stdout&nbsp; - Where STDOUT from
the executable should go.</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -stderr&nbsp; - Where STDERR from
the executable should go.</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -trial&nbsp;&nbsp; - Don't execute
the commands just display.</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -cprefix - Command prefix. Default
"Executing: "</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -fail&nbsp;&nbsp;&nbsp; - The name
of the fail flag file.</tt>
<br><tt>All switches with the exception of -trial require an argument.</tt>
<p><font color="#000000"># Script to find files according to a pattern
and then perform commands</font>
<br><font color="#000000"># on them. Various tokens may be supplied on
the command line which are</font>
<br><font color="#000000"># relaced by actual values when the command is
executed. This script</font>
<br><font color="#000000"># has a sister script runExeConfig.pl which reads
a configuration file</font>
<br><font color="#000000"># containing a list of fandExe.pl commands.</font>
<br><font color="#000000">#</font>
<br><font color="#000000"># Example:</font>
<br><font color="#000000">#</font>
<br><font color="#000000">#&nbsp;&nbsp; fandExe.pl -rootDir $ALIEN_HOME/include</font>
<br><font color="#000000">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
-file "*.mk"</font>
<br><font color="#000000">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
-command "$ALIEN_MAKE -f @currentFile clean"</font>
<br><font color="#000000">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
-command "$ALIEN_MAKE -f @currentFile DODEBUG=YES"</font>
<br><font color="#000000">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
-depth 0</font>
<br><font color="#000000">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
-stdout @arch/@headFile_DEBUG.log</font>
<br><font color="#000000">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
-stderr @arch/@headFile_DEBUG.log</font>
<br><font color="#000000">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
-fail @arch/@headFile_DEBUG.err</font>
<br><font color="#000000">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
-cprefix "Building library: "</font>
<br><font color="#000000">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
-trial</font>
<br><font color="#000000">#</font>
<br><font color="#000000"># This example will begin searching for files
with the extension ".mk"</font>
<br><font color="#000000"># from the root directory&nbsp; $ALIEN_HOME/include.
The search will occur</font>
<br><font color="#000000"># only in the root directory as the depth is
specified as 0. If the depth</font>
<br><font color="#000000"># was specified as 1 all subdirectories would
also be searched. Depth</font>
<br><font color="#000000"># may have any value greater than 0 so that an
entire directory hierarchy</font>
<br><font color="#000000"># may be searched. The -rootDir switch may be
repeated as often as necessary.</font>
<br><font color="#000000"># The file search will then commence from each
root directory specified.</font>
<br><font color="#000000"># For each file found the two commands listed
will be executed. The token</font>
<br><font color="#000000"># @currentFile will be replaced by the name of
the file found. STDOUT</font>
<br><font color="#000000"># has been redirected to the file named @arch/@headFile_DEBUG.log.
The tokens</font>
<br><font color="#000000"># @arch and @headFile will be replaced by actual
values. See below for an</font>
<br><font color="#000000"># explanation of the tokens available. Similarly
for STDERR. The -fail switch</font>
<br><font color="#000000"># causes a flag file named @arch/@headFile_DEBUG.err
to be created should</font>
<br><font color="#000000"># either of the commands fail. The file is named
in a similar manner to the</font>
<br><font color="#000000"># STDOUT and STDERR files. As the example shows
the -command switch may be</font>
<br><font color="#000000"># repeated as often as necessary.</font>
<br><font color="#000000">#</font>
<br><font color="#000000"># Example output:</font>
<br><font color="#000000"># The script writes to STDOUT a progress summary
as it executes each command.</font>
<br><tt><font color="#000000"># Root: /usr/development/AlienDev/include</font></tt>
<br><tt><font color="#000000"># Building library:&nbsp; gmake -f Alien.mk
clean&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
OK&nbsp; 0</font></tt>
<br><tt><font color="#000000"># Building library:&nbsp; gmake -f Alien.mk
DODEBUG=YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
OK&nbsp; 0</font></tt>
<br><tt><font color="#000000"># Building library:&nbsp; gmake -f CMClient.mk
clean&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
OK&nbsp; 0</font></tt>
<br><tt><font color="#000000"># Building library:&nbsp; gmake -f CMClient.mk
DODEBUG=YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
OK&nbsp; 0</font></tt>
<br><tt><font color="#000000"># Building library:&nbsp; gmake -f ESInterface.mk
clean&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
OK&nbsp; 0</font></tt>
<br><tt><font color="#000000"># Building library:&nbsp; gmake -f ESInterface.mk
DODEBUG=YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
OK&nbsp; 0</font></tt>
<br><tt><font color="#000000"># Building library:&nbsp; gmake -f ESUtilFnReplacements.mk
clean&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OK&nbsp; 0</font></tt>
<br><tt><font color="#000000"># Building library:&nbsp; gmake -f ESUtilFnReplacements.mk
DODEBUG=YES&nbsp; OK&nbsp; 0</font></tt>
<br><tt><font color="#000000"># Building library:&nbsp; gmake -f MakeDoc.mk
clean&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
OK&nbsp; 0</font></tt>
<br><tt><font color="#000000"># Building library:&nbsp; gmake -f MakeDoc.mk
DODEBUG=YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
OK&nbsp; 0</font></tt>
<br><font color="#000000">#</font>
<br><font color="#000000"># This output was generated using the -trial
switch so that the commands</font>
<br><font color="#000000"># did not execute but are simply displayed. This
is useful for debugging.</font>
<br><font color="#000000"># The number in the far right column is the elapsed
time in seconds for the command to complete.</font>
<br><font color="#000000"># The -cprefix switch is used to specify the
prefix displayed on each output</font>
<br><font color="#000000"># line before the command. Please notice that
the tokens have been replaced</font>
<br><font color="#000000"># by actual filenames generated from the files
found.</font>
<br><font color="#000000"># Also the shell environment variables $ALIEN_HOME
and</font>
<br><font color="#000000"># $ALIEN_MAKE have been replaced by their actual
values.</font>
<br><font color="#000000">#</font>
<br><font color="#000000"># Valid Tokens:</font>
<br><font color="#000000">#&nbsp; @currentFile&nbsp; The name of the current
file found.</font>
<br><font color="#000000">#&nbsp; @headFile&nbsp;&nbsp;&nbsp;&nbsp; The
prefix of the current file found.</font>
<br><font color="#000000">#&nbsp; @fullFilePath The full path to the current
file.</font>
<br><font color="#000000">#&nbsp; @currentDir&nbsp;&nbsp; The current directory.</font>
<br><font color="#000000">#&nbsp; @relDir&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
The directory relative to the root directory.</font>
<br><font color="#000000">#&nbsp; @flatRelDir&nbsp;&nbsp; The flattened
relative directory name ie "/" replaced by "_".</font>
<br><font color="#000000">#&nbsp; @arch&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
The architecture code.</font>
<br><font color="#000000">#</font>
<br><font color="#000000"># For the file found called Alien.mk. The tokens
would have the following</font>
<br><font color="#000000"># values.</font>
<br><font color="#000000">#&nbsp; @currentFile&nbsp;&nbsp; Alien.mk</font>
<br><font color="#000000">#&nbsp; @headFile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Alien</font>
<br><font color="#000000">#&nbsp; @fullFilePath&nbsp; /usr/development/AlienDev/include/Alien.mk</font>
<br><font color="#000000">#&nbsp; @currentDir&nbsp;&nbsp;&nbsp; /usr/development/AlienDev/include</font>
<br><font color="#000000">#&nbsp; @relDir</font>
<br><font color="#000000">#&nbsp; @flatRelDir</font>
<br><font color="#000000">#&nbsp; @arch&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
SOLM</font>
<br><font color="#000000">#</font>
<p><font color="#3333FF">runExeConfig.pl </font><font color="#000000">This
script calls fandExe.pl for each paragraph specified in a configuration
file.</font>
<p><tt>Usage runExeConfig.pl -cfile [-efile] [-trial]</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -cfile&nbsp;&nbsp;&nbsp; - The name
of the configuration file to run.</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -efile&nbsp;&nbsp;&nbsp; - The name
of the file which sets the environment.</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -trial&nbsp;&nbsp;&nbsp; - Force
all commands to run in trial mode.</tt>
<p><i>Configuration File:</i>
<br>The configuration file controls the operation of this script.
<p># This script reads the given execute configuration file and runs the
<br># command fandExe.pl for each distinct command set found.
<br># fandExe.pl is essentially a specialised find and execute script.
<br># The following syntax is required for the configuration file.
<br># Lines begining with a # are considered to be comment lines and are
ignored.
<br># A command set may flow over many lines with one complete command
enclosed
<br># in parenthese. See fandExe.pl header for further explanation.
<br># Example:
<br>#
<br>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (-rootDir /usr/development/AlienDev/UnitTest
<br>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
-file "*.log"
<br>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
-command "ls -l @currentFile"
<br>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
-depth 20
<br>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
-stdout @headFile.log
<br>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
-stderr @headFile.err)
<br>#
<p><font color="#3333FF">NightlyBuild.cfg </font><font color="#000000">Is
an example of a configuration file for runExeConfig.pl</font>
<br><font color="#000000">This configuration file controls all of the building
and testing that occurs each night. It also configures runExeConfig.pl
to rebuild the Alien documentation set each night. As can be seen from
the configuration file the results of each build and test are saved in
files with the extension ".nblog". If a build or test fails a file with
the extension ".nberr" remains. The log and error files drive the creation
of the html summary page which is created each morning by the script mkSummary.pl.</font>
<p># This configuration file is intended for use with the script runExeConfig.pl.
<br># It determines the components of the Alien library that are built
each night
<br># and the tests performed.
<br># Author: J.Gerschwitz&nbsp; Date: 4 Sept 2001
<br># Comment: Original version
<br>#
<br># Build the debug version of all libraries
<br>(-rootDir $ALIEN_HOME/include
<br>&nbsp;&nbsp; -file "*.mk"
<br>&nbsp;&nbsp; -command "$ALIEN_MAKE -f @currentFile DODEBUG=YES clean"
<br>&nbsp;&nbsp; -command "$ALIEN_MAKE -f @currentFile DODEBUG=YES"
<br>&nbsp;&nbsp; -depth 0
<br>&nbsp;&nbsp; -stdout @arch/@headFile_DEBUG.nblog
<br>&nbsp;&nbsp; -stderr @arch/@headFile_DEBUG.nblog
<br>&nbsp;&nbsp; -fail @arch/@headFile_DEBUG.nberr
<br>&nbsp;&nbsp; -cprefix "Building: "
<br>)
<br>#
<br># Build the non debug version of all libraries
<br>(-rootDir $ALIEN_HOME/include
<br>&nbsp;&nbsp; -file "*.mk"
<br>&nbsp;&nbsp; -command "$ALIEN_MAKE -f @currentFile DODEBUG=NO clean"
<br>&nbsp;&nbsp; -command "$ALIEN_MAKE -f @currentFile DODEBUG=NO"
<br>&nbsp;&nbsp; -depth 0
<br>&nbsp;&nbsp; -stdout @arch/@headFile_NODEBUG.nblog
<br>&nbsp;&nbsp; -stderr @arch/@headFile_NODEBUG.nblog
<br>&nbsp;&nbsp; -fail @arch/@headFile_NODEBUG.nberr
<br>&nbsp;&nbsp; -cprefix "Building: "
<br>)
<br>#
<br># Build the non debug version of ESProcs
<br>(-rootDir $ALIEN_HOME/AlienESProcs
<br>&nbsp;&nbsp; -file "Makefile"
<br>&nbsp;&nbsp; -command "$ALIEN_MAKE -f @currentFile DODEBUG=YES clean"
<br>&nbsp;&nbsp; -command "$ALIEN_MAKE -f @currentFile NAME=@flatRelDir
DODEBUG=YES"
<br>&nbsp;&nbsp; -depth 2
<br>&nbsp;&nbsp; -stdout @arch/@flatRelDir_DEBUG.nblog
<br>&nbsp;&nbsp; -stderr @arch/@flatRelDir_DEBUG.nblog
<br>&nbsp;&nbsp; -fail&nbsp;&nbsp; @arch/@flatRelDir_DEBUG.nberr
<br>&nbsp;&nbsp; -cprefix "Building: "
<br>)
<br>#
<br># Build the ESProc library
<br>(-rootDir $ALIEN_HOME/AlienESProcs/lib
<br>&nbsp;&nbsp; -file "ProcLib.mk"
<br>&nbsp;&nbsp; -command "$ALIEN_MAKE -f @fullFilePath"
<br>&nbsp;&nbsp; -depth 0
<br>&nbsp;&nbsp; -stdout /dev/null
<br>&nbsp;&nbsp; -cprefix "Building: "
<br>)
<br>#
<br># Build the standalone executables
<br>(-rootDir $ALIEN_HOME/AlienProg
<br>&nbsp;&nbsp; -file "*.mk"
<br>&nbsp;&nbsp; -command "$ALIEN_MAKE -f @currentFile DODEBUG=YES clean"
<br>&nbsp;&nbsp; -command "$ALIEN_MAKE -f @currentFile DODEBUG=YES"
<br>&nbsp;&nbsp; -depth 2
<br>&nbsp;&nbsp; -stdout @arch/@headFile_DEBUG.nblog
<br>&nbsp;&nbsp; -stderr @arch/@headFile_DEBUG.nblog
<br>&nbsp;&nbsp; -fail&nbsp;&nbsp; @arch/@headFile_DEBUG.nberr
<br>&nbsp;&nbsp; -cprefix "Building: "
<br>)
<br>#
<br># Build examples
<br>(-rootDir $ALIEN_HOME/Examples
<br>&nbsp;&nbsp; -file "*.mk"
<br>&nbsp;&nbsp; -command "$ALIEN_MAKE -f @currentFile DODEBUG=YES clean"
<br>&nbsp;&nbsp; -command "$ALIEN_MAKE -f @currentFile DODEBUG=YES"
<br>&nbsp;&nbsp; -depth 2
<br>&nbsp;&nbsp; -stdout @arch/@headFile_DEBUG.nblog
<br>&nbsp;&nbsp; -stderr @arch/@headFile_DEBUG.nblog
<br>&nbsp;&nbsp; -fail&nbsp;&nbsp; @arch/@headFile_DEBUG.nberr
<br>&nbsp;&nbsp; -cprefix "Building: "
<br>)
<br>#
<br># Build all unit tests with no debug
<br>(-rootDir $ALIEN_HOME/UnitTest/AlienClass/Automatic
<br>&nbsp;-rootDir $ALIEN_HOME/UnitTest/Gool/Automatic
<br>&nbsp;&nbsp; -file "*.mk"
<br>&nbsp;&nbsp; -command "$ALIEN_MAKE -f @currentFile DODEBUG=NO clean"
<br>&nbsp;&nbsp; -command "$ALIEN_MAKE -f @currentFile DODEBUG=NO"
<br>&nbsp;&nbsp; -depth 2
<br>&nbsp;&nbsp; -stdout @arch/@currentFile_NODEBUG.nblog
<br>&nbsp;&nbsp; -stderr @arch/@currentFile_NODEBUG.nblog
<br>&nbsp;&nbsp; -fail&nbsp;&nbsp; @arch/@currentFile_NODEBUG.nberr
<br>&nbsp;&nbsp; -cprefix "Building: "
<br>)
<br>#
<br># Run all unit tests
<br>(-rootDir $ALIEN_HOME/UnitTest/AlienClass/Automatic
<br>&nbsp;-rootDir $ALIEN_HOME/UnitTest/Gool/Automatic
<br>&nbsp;&nbsp; -file "*.mk"
<br>&nbsp;&nbsp; -command "$ALIEN_HOME/scripts/UTRun.pl -file @currentFile"
<br>&nbsp;&nbsp; -depth 2
<br>&nbsp;&nbsp; -stdout @arch/@headFile_NODEBUG.nblog
<br>&nbsp;&nbsp; -stderr @arch/@headFile_NODEBUG.nblog
<br>&nbsp;&nbsp; -fail&nbsp;&nbsp; @arch/@headFile_NODEBUG.nberr
<br>&nbsp;&nbsp; -cprefix "Testing: "
<br>)
<br>#
<br># Build unit tests with debug on
<br>(-rootDir $ALIEN_HOME/UnitTest/AlienClass/Automatic
<br>&nbsp;-rootDir $ALIEN_HOME/UnitTest/Gool/Automatic
<br>&nbsp;&nbsp; -file "*.mk"
<br>&nbsp;&nbsp; -command "$ALIEN_MAKE -f @currentFile DODEBUG=YES clean"
<br>&nbsp;&nbsp; -command "$ALIEN_MAKE -f @currentFile DODEBUG=YES"
<br>&nbsp;&nbsp; -depth 2
<br>&nbsp;&nbsp; -stdout @arch/@currentFile_DEBUG.nblog
<br>&nbsp;&nbsp; -stderr @arch/@currentFile_DEBUG.nblog
<br>&nbsp;&nbsp; -fail&nbsp;&nbsp; @arch/@currentFile_DEBUG.nberr
<br>&nbsp;&nbsp; -cprefix "Building: "
<br>)
<br>#
<br># Run unit tests built with debug on
<br>(-rootDir $ALIEN_HOME/UnitTest/AlienClass/Automatic
<br>&nbsp;-rootDir $ALIEN_HOME/UnitTest/Gool/Automatic
<br>&nbsp;&nbsp; -file "*.mk"
<br>&nbsp;&nbsp; -command "$ALIEN_HOME/scripts/UTRun.pl -file @currentFile"
<br>&nbsp;&nbsp; -depth 2
<br>&nbsp;&nbsp; -stdout @arch/@headFile_DEBUG.nblog
<br>&nbsp;&nbsp; -stderr @arch/@headFile_DEBUG.nblog
<br>&nbsp;&nbsp; -fail&nbsp;&nbsp; @arch/@headFile_DEBUG.nberr
<br>&nbsp;&nbsp; -cprefix "Testing: "
<br>)
<p># Build alien documentation
<br>(-rootDir $ALIEN_HOME/doc
<br>&nbsp;&nbsp; -file "*.mk"
<br>&nbsp;&nbsp; -command "$ALIEN_MAKE -f @currentFile"
<br>&nbsp;&nbsp; -depth 0
<br>&nbsp;&nbsp; -stdout @arch/@headFile_DEBUG.nblog
<br>&nbsp;&nbsp; -stderr @arch/@headFile_DEBUG.nblog
<br>&nbsp;&nbsp; -fail&nbsp;&nbsp; @arch/@headFile_DEBUG.nberr
<br>&nbsp;&nbsp; -cprefix "Building Documentation: "
<br>)
<p><font color="#3333FF">UTRun.pl&nbsp; </font><font color="#000000">It
should be noted that the unit tests are run through this script. This essentially
takes one argument which is of the format </font><tt>&lt;</tt>UnitTestName>.mk.
It then attempts to run an executable called UnitTestName.
<br><tt># Script to run a unit test.</tt>
<br><tt># The -file argument is expected to be of the format &lt;UnitTestName>.mk</tt>
<br><tt># The executable is expected to be in the sub directory &lt;architecture>.</tt>
<br><tt># The default action is to run the unit test executable.</tt>
<br><tt># If the file "testList.UT" exists it is expected to contain command
line</tt>
<br><tt># arguments which will be executed instead.</tt>
<br><tt># If the file "architectures.UT" exists it will contain the standard</tt>
<br><tt># names of architectures for which no tests are to be run.</tt>
<p><font color="#3333FF">nightlyBuild.ksh </font><font color="#000000">This
script is run by cron each night to rebuild all libraries and unit tests.
Following the</font>
<br><font color="#000000">complete rebuild each unit test is executed.</font>
<p><font color="#3333FF">mkSummary.pl </font><font color="#000000">This
script is run each morning by cron after all of the nightly build and tests
have completed. As this script doesn't take very long to run it is started
30 minutes before normal office hours which is normally well after the
nightly builds have completed. It mails a summary of the nightly build
logs found and creates a summary html document.</font>
<p><font color="#000000">Example mail message.</font>
<p><tt><font color="#000000">Quick Summary of Alien builds and Unit tests:</font></tt>
<p><tt><font color="#000000">&nbsp;&nbsp;&nbsp; LINUXM:&nbsp;&nbsp;&nbsp;
365 OK,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 6 Failures,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1 Old log/error files</font></tt>
<br><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RS6K:&nbsp;&nbsp;&nbsp;
369 OK,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 Failures,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1 Old log/error files</font></tt>
<br><tt><font color="#000000">&nbsp;&nbsp; RS6K_v5:&nbsp;&nbsp;&nbsp; 339
OK,&nbsp;&nbsp;&nbsp;&nbsp; 26 Failures,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
7 Old log/error files</font></tt>
<br><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SGIM:&nbsp;&nbsp;&nbsp;
369 OK,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 Failures,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1 Old log/error files</font></tt>
<br><tt><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SOLM:&nbsp;&nbsp;&nbsp;
365 OK,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 6 Failures,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1 Old log/error files</font></tt>
<br><tt><font color="#000000">&nbsp;WIN32_NT5:&nbsp;&nbsp;&nbsp; 358 OK,&nbsp;&nbsp;&nbsp;&nbsp;
12 Failures,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 Old log/error files</font></tt>
<p><tt><font color="#000000">Full Summary: http://web.prth.tensor.pgs.com/Programming/buildSummary.html</font></tt>
<br>&nbsp;
<br>&nbsp;
<br>&nbsp;
<br>&nbsp;
<br>&nbsp;
<br>&nbsp;
<br>&nbsp;
</body>
</html>
