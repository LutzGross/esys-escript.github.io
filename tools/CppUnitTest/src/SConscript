Import('*')

import os
import string

cxx_flags = '-O0 -openmp -openmp_report0 -tpp2 -ansi -ansi_alias -no-gcc -fpic -w1'

CppUnitTest_path = str(esysroot) + '/tools/CppUnitTest/inc'

cpp_path = [CppUnitTest_path]

lib = 'CppUnitTest'
sources = ['TestCase.cpp',
           'TestFailure.cpp',
           'TestRunner.cpp',
           'TestSuite.cpp',
           'TestResult.cpp',
           'TextTestResult.cpp']

cppunit_env = Environment(ENV = os.environ)

cppunit_env.Replace(CXX = 'icc')
cppunit_env.Replace(CXXFLAGS = cxx_flags)
cppunit_env.Replace(CPPPATH = cpp_path)

cppunit_lib = cppunit_env.StaticLibrary(lib, sources)
cppunit_env.Install(libdir, cppunit_lib)
