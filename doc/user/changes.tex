
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Copyright (c) 2009-2010 by University of Queensland
% Earth Systems Science Computational Center (ESSCC)
% http://www.uq.edu.au/esscc
%
% Primary Business: Queensland, Australia
% Licensed under the Open Software License version 3.0
% http://www.opensource.org/licenses/osl-3.0.php
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Changes from previous releases}
\label{app:changes}

\subsection*{3.0 to 3.1}
\begin{itemize}
\item{The \emph{escript} launcher has been renamed to \emph{run-escript} the old-name will still work in this version
but will be removed in future.}
\item Lazy evaluation features have been improved and documented (See Section~\ref{sec:lazy}).
 \item Escript documentation includes a new Cookbook which demonstrates how to solve sample problems using escript.
\item Macro elements have been introduced.
\item The saveDataCSV method allows one or more Data objects to be exported in CSV format.
\item Data objects can be populated by interpolating from a values in a table.
\item The new getInfLocator and getSupLocator functions in esys.escript.pdetools return Locators to a minimal/maximal point over the data.
\item There is a new class to model fault systems (esys.escript.faultsystems.FaultSystem).
\item A beta version of an Algebraic Multigrid (AMG) solver is included.
\item Inverting square matricies larger than 3x3 is now permitted if escript is compiled with Lapack support.
\item If escript is compiled with a modern compiler, then inf/sup/Lsup will now report NaN, +/-inf as appropriate if those values appear in the data.
\item Data.setTags will take tag names as well as tag numbers.
\item The Scalar, Vector, Tensor, Tensor3, Tensor4 factory methods can now take array/nested sequence like objects as their initial values.
\item escript.util.mkDir can now take a list of directories to create.
\item Behind the scenes, python docstrings have been rewritten from epydoc to restructured text.
\item Various other bug fixes and performance tweaks.
\end{itemize}


\subsection*{2.0 to 3.0}
\begin{itemize}
\item The major change here was replacing \module{numarray} with \numpy.
For general instructions on converting scripts to use numpy see \url{http://www.stsci.edu/resources/software_hardware/numarray/numarray2numpy.pdf}.
The specific changes to \escript are:
\begin{itemize}
  \item getValueOfDataPoint() which returned a \module{numarray}.array has been replaced by
 getTupleForDataPoint() which returns a \PYTHON tuple containing
the components of the data point. In the case of matricies or higher ranked data, the tuples will be nested. Use 
\numpy.array(data.getTupleForDataPoint()) if a \numpyNDA object is required.
 \item getValueOfGlobalDataPoint has similarly been replaced by getTupleForGlobalDataPoint().
 \item integrate(data) now returns a \numpyNDA instead of a \module{numarray}.array.
\end{itemize}
Any python methods which previously accepted \module{numarray} objects will accept \numpy objects instead.

\item
The way solver options are defined for \LinearPDE objects has been changed. There is now a \SolverOptions object attached to the \LinearPDE object which is handeling the options of solvers used to solve the PDE. The following changes apply:  
\begin{itemize}
\item The \method{setTolerance} and \method{setAbsoluteTolerance} methods have been removed. Instead use
\method{setTolerance} and \method{setAbsoluteTolerance} on the \SolverOptions object.
For example: \method{getSolverOptions().setTolerance(\ldots)} 


\item The \method{setSolverPackage} and \method{setSolverMethod} methods have been removed.
Instead use the methods \method{setPackage}, \method{setSolverMethod} and \method{setPreconditioner}.
For example: getSolverOptions().setPackage(\ldots).

\item The static class variables defining packages, solvers and preconditioners have been removed and are now accessed via the corresponding  static class variables in \SolverOptions. For instance use \method{SolverOptions.PCG} instead of 
\method{LinearPDE.PCG} to select the preconditioned conjugate gradient method.

\item The \method{getSolution} takes now no argument. Use the corresponding
methods of the \SolverOptions object returned by \method{getSolverOptions()} 
to set values,\\ e.g. use
\method{getSolverOptions().setVerbosityOn()} instead of argument \code{verbose=True}
and \method{getSolverOptions().setIterMax(1000)} instead of argument \code{iter_max=1000}
\end{itemize}

\item
The \pyvisi module from previous releases has been deprecated and will no longer be supported.
It is still present in the source code and can still be used if you compile \escript from source.
It will not be available in binary releases.
Its use is discouraged.
\emph{The documentation for \pyvisi is not available in this release.}
% The documentation for \pyvisi can be found in Appendix~\ref{PYVISI CHAP}.

\end{itemize}
